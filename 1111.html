<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <canvas id="canvas" width="300px" height="400px"></canvas>
</body>

<script>
       var canvas = document.getElementById("canvas");
       var context = canvas.getContext("2d");
       /*
        * 利用javascript面向对象的内容
        * * 圆形 - 对象
        *   * {}
        *   * new Object()
        *   * function 构造器(){}
        */
       function Circle(){
           this.x = Math.random()*canvas.width;
           this.y = -10;
           this.r = 10;
           // 绘制圆形方法
           this.paint = function(){
               context.beginPath();
               context.arc(this.x,this.y,this.r,0,Math.PI*2);
               context.fill();
           }
           // 控制圆形移动方法
           this.step = function(){
               this.y++;
           }
       }
       //var circle = new Circle();
       var circles = [];
       // 定义函数 - 创建圆形对象
       function createCircles(){
           var circle = new Circle();
           circles[circles.length] = circle;
       }
       // 定义函数 - 绘制所有圆形
       function paintCircls(){
           for(var i=0;i<circles.length;i++){
               circles[i].paint();
           }
       }
       // 定义函数 - 控制所有圆形运动
       function stepCircles(){
           for(var i=0;i<circles.length;i++){
               circles[i].step();
           }
       }
   
       var myimg = new Image();
       myimg.src = "./bg1.jpg";
   
       var time = 0;
       setInterval(function(){
           context.drawImage(myimg,0,0);
           time++;
           if(time%20==0){
               createCircles();
           }
           paintCircls();
           stepCircles();
       },10);
   </script>
</html>